# Copyright (c) 2021 Dane Freeman.
# Distributed under the terms of the Modified BSD License.

name: jupyterlab-graph-lsp

platforms:
  - linux-64
  - osx-64
  - win-64

commands:
  ext:pack:
    unix: &pack cd dist && npm pack ..
    windows: *pack

env_specs:
  default:
    inherit_from:
      - jupyterlab_graph_lsp
      - _utest
      - _lint
    packages:
      - pip
      - python >=3.9,<3.10.0a0
      - twine
      - wheel

  jupyterlab_graph_lsp:
    description: binder environment, not actually created
    channels:
      - https://conda.anaconda.org/conda-forge
    packages:
    - gql
    - ipywidgets >=7.5.1,<8
    - jupyter-lsp-python-plugins
    - jupyterlab-lsp >=3.5,<4
    - nodejs >=14,!=15.*,<17
    - oxrdflib
    - pyshacl
    - rdflib >=6,<7
    - reasonable

  _lint:
    description: linting/formatting environment. not actually created.
    packages:
      - black
      - isort
      - pyflakes
      - flake8

  _utest:
    description: unit test environment. not actually created.
    packages:
      - pytest-asyncio
      - pytest-cov
      - pytest-html
      - pytest-xdist
